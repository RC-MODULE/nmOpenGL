# Утилиты

Здесь находятся специализированные функции написанные для решения некоторых задач nmOpenGL, зачастую с использование векторных сопроцессоров. Эти функции самодостаточны и не используют контекст nmOpenGL.

## Состав

Функции подразделяются на три группы:
* `common` - здесь лежат функции, написанные на скалярном ядре и которые можно запускать на любом ядре
* `fixed` - здесь лежат функции, используещие векторный сопроцессор с целочисленной арифметикой
* `float` - здесь лежат функции, используещие векторный сопроцессор с плавающей точкой

## Тестирование

### Scons

Для сборки тестов необходимо установить [Scons 4.0.1](https://www.scons.org/doc/production/HTML/scons-user.html#chap-build-install): `pip install scons==4.0.1`


### Сборка
Иерархия тестов аналогична иерархии исходников. Сборка тестов происходит с помощью `scons`, вызываемым без целей. 

```
cd /tests
scons
```

Тесты можно собирать из папки `tests`, тогда соберутся все тесты или же из папок `common`, `fixed` и `float`, тогда будут собираться только аналогичные тесты

```
cd /tests/common
scons
```
```
cd /tests/fixed
scons
```
```
cd /tests/float
scons
```

TODO в папке `tests` сделать цели `float`, `fixed` и `common` 

> Важное замечание: scons кладет объектники рядом с исходниками.

Для запуска тестов `scons` запускается с целью `run`

```
cd /tests
scons run
```

Аналогично сборке, можно запускать тест только определенной категории

```
cd /tests/common
scons run
```
```
cd /tests/fixed
scons run
```
```
cd /tests/float
scons run
```

## Добавление теста

Чтобы добавить тест, нужно создать папку с таким же названием как у тестируемого файла без расширения и внутри создать main.cpp, в котором и должны проходить тесты на эту функцию. Скрипт берет только объектник, название которого совпадает с названием папки, поэтому нельзя проверить сразу несколько функций за раз в одном main